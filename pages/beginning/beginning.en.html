<!DOCTYPE html><html class="i-ua_js_no i-ua_css_standard"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7, IE=edge"/><title> What is BEM?</title><script>;(function(d,e,c,r){e=d.documentElement;c="className";r="replace";e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");if(d.compatMode!="CSS1Compat")e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")})(document);</script><!--[if gt IE 7]><!--><link rel="stylesheet" href="_beginning.en.css"/><!--<![endif]--><!--[if lt IE 8]><link rel="stylesheet" href="_beginning.en.ie.css"/><![endif]--><script src="//yandex.st/jquery/1.6.2/jquery.min.js"></script><script src="beginning.en.js"></script></head><body class="b-page__body b-page"><!-- Yandex.Metrika counter --><div style="display:none;"><script type="text/javascript">(function(w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter10053391 = new Ya.Metrika({id:10053391, enableAll: true, trackHash:true}); } catch(e) { } }); })(window, "yandex_metrika_callbacks");</script></div><script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script><noscript><div><img src="//mc.yandex.ru/watch/10053391" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --><div class="b-text"><h1 class="b-text__h1" id="WhatisBEM">What is BEM?</h1><p class="b-text__p">This article describes the theory and practice of building web sites at <a class="b-link" href="http://company.yandex.com/">Yandex</a>, a large Internet company.</p><p class="b-text__p">There are plenty of sites under development here, thousands in fact. The approaches we use for HTML/CSS markup and other front-end technologies are in constant evolution.</p><p class="b-text__p">Developing for a big portal has a range of specifics and the process should be able to accommodate them:</p><ul class="b-text__ul"><li class="b-text__li">Fast-to-develop, long-lived projects<br/>
   It should be possible to develop and launch the first version quickly with an
   architecture that helps maintain it in the long run.</li><li class="b-text__li">Numerous people working on a project<br/>
   We should be able to organize work efficiently in teams of 2 or more developers.</li><li class="b-text__li">Team scalability<br/>
   Adding new people to a product team should improve its productivity. We need to be
   able to assign new members to a team without a steep learning curve.<br/>
   Code should be well-structured for a project to remain maintainable over time and
   team changes.</li><li class="b-text__li">Code reuse<br/>
   To maintain UI consistency and minimize development effort on typical interface
   components, those components have to be easily reusable.</li></ul><p class="b-text__p">For years we kept looking for solutions to our problems, and at one point they became <tt>BEM methodology</tt>.<br/> <tt>BEM</tt> stands for Block, Element, Modifier. The meaning of these terms will be described further in the article. Right now, let us put BEM in some historical perspective.</p><p class="b-text__p">We first began sketching out our internal front-end framework around year 2007, starting with a robust CSS naming convention and a file system layout associated with it. Since the naming convention was well-structured, it seemed suitable to develop certain JavaScript helpers to work with the DOM and CSS classes in particular on a higher level of abstraction. We then used those approaches to build an internal library of UI components that could be shared among our various websites and rich applications, built using different technology stacks (XML/XSLT, Python/Django, Perl/TT2). As our ambitions, complexity, and performance requirements grew, we aimed at replacing XSLT and Perl templates with a JS-based declarative templating DSL, built on top of Node.js. Along with those efforts we looked into simplifying development workflow and developed a bunch of command-line tools that already help us manage front-end code on the file system, preprocess CSS and JavaScript code, and so on, and so forth.</p><p class="b-text__p">Some parts of the BEM stack started as open source projects, others (like the UI component library) are being gradually open sourced. Our goal is to publish most of it during 2012.</p><p class="b-text__p">One of the most common examples of a methodology in  programming is Object-Oriented Programming. It&apos;s a programming paradigm embodied by many languages. In some ways, BEM is similar to OOP. It&apos;s a way of describing reality in code, a range of patterns, and a way of thinking about program entities regardless of programming languages being used.<br/> We used BEM principles to create a set of front-end development techniques and tools, that allow us to build websites quickly and maintain them over a long time.</p><p class="b-text__p">The principles are the following:</p><h2 class="b-text__h2" id="UnifiedDataDomain">Unified Data Domain</h2><p class="b-text__p">Imagine an ordinary website, like the one pictured below.</p><div style="text-align:center">
<img src="images/site.png"/>
</div><p class="b-text__p">While developing such a site it is useful to mark out &quot;blocks&quot; of which the site consists.<br/> For example, in this picture there are <tt>Head</tt>, <tt>Main Layout</tt> and <tt>Foot</tt> blocks. The <tt>Head</tt> in turn consists of <tt>Logo</tt>, <tt>Search</tt>, <tt>Auth block</tt> and <tt>Menu</tt>. <tt>Main Layout</tt> contains a <tt>Page Title</tt> and a <tt>Text Block</tt>.</p><div style="text-align:center">
<img src="images/site-marked.png"/>
</div><p class="b-text__p">Giving each part of the page a name is very useful when it comes to team communication.<br/> A project manager could ask:</p><ul class="b-text__ul"><li class="b-text__li">to make the <tt>Head</tt> bigger or</li><li class="b-text__li">to create a page without a <tt>Search</tt> form in the <tt>Head</tt></li></ul><p class="b-text__p">An HTML guy could ask a fellow JavaScript developer</p><ul class="b-text__ul"><li class="b-text__li">to make <tt>Auth Block</tt> animated, etc.</li></ul><p class="b-text__p">Let&apos;s now take a closer look at what constitutes BEM:</p><h3 class="b-text__h3" id="Block">Block</h3><p class="b-text__p">A <tt>block</tt> is an independent entity, a &quot;building block&quot; of an application. A block can be either simple or compound (containing other blocks).</p><p class="b-text__p"><b>Example</b><br/> Search form block<br/></p><div style="text-align:center">
<img src="images/search-block.png"/>
</div><h3 class="b-text__h3" id="Element">Element</h3><p class="b-text__p">An <tt>element</tt> is a part of a block that performs a certain function. Elements are context-dependent: they only make sense in the context of the block they belong to.</p><p class="b-text__p"><b>Example</b><br/> An input field and a button are elements of the Search Block</p><div style="text-align:center">
<img src="images/search-block-marked.en.png"/>
</div><h2 class="b-text__h2" id="Meansofdescribingpagesandtemplates">Means of describing pages and templates</h2><p class="b-text__p">Blocks and elements constitute page content. Besides simply being present on a page, their arrangement is also important.</p><p class="b-text__p">Blocks (or elements) may follow each other in a certain order:</p><p class="b-text__p">For example, a list of goods on a commerce website:</p><div style="text-align:center">
<img src="images/goods-list.png"/>
</div><p class="b-text__p">...or menu items:</p><div style="text-align:center">
<img src="images/menu-items.png"/>
</div><p class="b-text__p">Blocks may also be contained inside other blocks:</p><p class="b-text__p">For example, a <tt>Head Block</tt> includes other blocks:</p><div style="text-align:center">
<img src="images/head-marked.png"/>
</div><p class="b-text__p">Besides our building blocks we need a way to describe page layout in plain text. To do so, every block and element should have a keyword that identifies it.</p><p class="b-text__p">A keyword designating a specific block is called <tt>block name</tt>.</p><p class="b-text__p">For example, <tt>menu</tt> can be a keyword for the <tt>Menu Block</tt>, <tt>head</tt> can be a keyword for the <tt>Head</tt> block.</p><p class="b-text__p">A keyword designating an element is called <tt>element name</tt>.</p><p class="b-text__p">For example, each item in a menu is an element <tt>item</tt> of the <tt>menu</tt> block.</p><p class="b-text__p">Block names must be unique within a project to unequivocally designate which block is being described. Only instances of the same block can have same names. In this case we say that one block is present on the page 2 (3, 4, ...) times.</p><p class="b-text__p">Element names must be unique within the scope of a block. An element can be repeated several times. For example, menu items.</p><div style="text-align:center">
<img src="images/menu-items.png"/>
</div><p class="b-text__p">Keywords should be put in certain order. Any data format that supports nesting (XML, JSON) will do:</p><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:page<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:head<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
      ...
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:logo<span class="ohl-punctuation">/&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:column<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:search<span class="ohl-punctuation">&gt;</span></span>
        <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:input<span class="ohl-punctuation">/&gt;</span></span>
        <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:button<span class="ohl-punctuation">&gt;</span></span>Search<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:button<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:search<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:column<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:auth<span class="ohl-punctuation">&gt;</span></span>
        ...
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:auth<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:head<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:page<span class="ohl-punctuation">&gt;</span></span></pre><p class="b-text__p">In this example, <tt>b</tt> and <tt>e</tt> namespaces separate block nodes from element nodes.</p><p class="b-text__p">The same in JSON:</p><pre class="ohl ohl_lang_js"><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>page<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>head<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
    <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
      <span class="ohl-punctuation">{</span> <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>logo<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
      <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
          <span class="ohl-punctuation">{</span>
            <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>search<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
              <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>input<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
              <span class="ohl-punctuation">{</span>
                <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>button<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
                <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Search<span class="ohl-punctuation">&apos;</span></span>
              <span class="ohl-punctuation">}</span>
            <span class="ohl-punctuation">]</span>
          <span class="ohl-punctuation">}</span>
        <span class="ohl-punctuation">]</span>
      <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
          <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>auth<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
          <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
        <span class="ohl-punctuation">}</span>
      <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">]</span>
  <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></pre><p class="b-text__p">Examples above show an object model with blocks and elements nested inside each other. This structure can also contain any number of custom data fields. We call this structure <tt>BEM tree</tt> (by analogy with DOM tree).</p><p class="b-text__p">Final browser markup is generated by applying template transformations (using XSL or JavaScript) to a BEM tree.</p><p class="b-text__p">If a developer needs to move a block to a different place on a page, he does so by changing the BEM tree. Templates generate the final view themselves.</p><p class="b-text__p">In our recent products we went with JSON as a page description format. It is then turned into HTML by a JS-based template engine.<br/> The tools we use are listed at the end of this article.</p><h2 class="b-text__h2" id="BlockIndependence">Block Independence</h2><p class="b-text__p">As projects grow, blocks tend to be added, removed, or moved around the page. For example, you may want to swap the <tt>Logo</tt> and <tt>Auth Block</tt> or to place the <tt>Menu</tt> under the <tt>Search Block</tt>.</p><div style="text-align: center">
<img src="images/head.png"/>
</div><div style="text-align: center">
<img src="images/head-changed.png"/>
</div><p class="b-text__p">To make this process easier, blocks must be <tt>independent</tt>.</p><p class="b-text__p">An <tt>independent</tt> block is implemented in a way that allows arbitrary placement â€” anywhere on the page, including nesting inside another block.</p><h3 class="b-text__h3" id="IndependentCSS">Independent CSS</h3><p class="b-text__p">From the CSS point of view it means that</p><ul class="b-text__ul"><li class="b-text__li">A block (or an element) must have a unique &quot;name&quot; (a CSS class) that could be used in a CSS rule.</li><li class="b-text__li">HTML elements must not be used in CSS selectors (.menu td) as such selectors are inherently
   not context-free.</li><li class="b-text__li">Cascading selectors for several blocks should be avoided.</li></ul><h4 class="b-text__h4" id="NamingforindependentCSSclasses">Naming for independent CSS classes</h4><p class="b-text__p">One of the possible naming schemes for CSS classes that satisfies said requirements is the following:</p><ul class="b-text__ul"><li class="b-text__li">CSS class for a block coincides with its <tt>block name</tt></li></ul><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></pre><ul class="b-text__ul"><li class="b-text__li">CSS class for an element is a <tt>block name</tt> and an <tt>element name</tt> separated
 by some character(s)</li></ul><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    ...
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    ...
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></pre><p class="b-text__p">It is necessary to include block name into a CSS class for an element to minimize cascading. It is also important to use separators consistently to allow the tools and helpers (described further) unambiguous programmatic access to the elements.</p><p class="b-text__p">Different naming schemes can be used, read <a class="b-link" href="http://bem.github.com/bem-bl/pages/naming/naming.en.wiki">here</a> about the naming convention we use.</p><h3 class="b-text__h3" id="Independenttemplates">Independent templates</h3><p class="b-text__p">From the template engine&apos;s perspective, block independence means that:</p><ul class="b-text__ul"><li class="b-text__li">Blocks and elements must be described in the input data<br/>
   Blocks (or elements) must have unique &quot;names&quot; to make things like &quot;<tt>Menu</tt> should be
   placed here&quot; expressible in our templates.</li><li class="b-text__li">Blocks may appear anywhere in a BEM tree</li></ul><h4 class="b-text__h4" id="Independenttemplatesforblocks">Independent templates for blocks</h4><p class="b-text__p">Coming upon a block in a template, the template engine should be able to unambiguously transform it into HTML. Thus, every block should have a template for that.</p><p class="b-text__p">For example, a template can look like this in XSL:</p><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template <span class="ohl-name ohl-name-attribute">match<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>b:menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:apply-templates<span class="ohl-punctuation">/&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>xsl:template<span class="ohl-punctuation">&gt;</span></span>

<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template <span class="ohl-name ohl-name-attribute">match<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>b:menu/e:item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:apply-templates<span class="ohl-punctuation">/&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template<span class="ohl-punctuation">&gt;</span></span></pre><p class="b-text__p">We are gradually discarding XSLT in our products in favor of our own JavaScript-based template engine <a class="b-link" href="https://github.com/veged/xjst">XJST</a>. This template engine absorbs everything we like about XSLT (we are fans of declarative programming), and implements it with JavaScript&apos;s productivity on either client or server side.<br/> We write our templates using a domain-specific language called BEMHTML, which is based on XJST. <a class="b-link" href="http://clubs.ya.ru/bem/replies.xml?item_no=992">The main ideas of BEMHTML</a> are published in the BEM club on Ya.Ru (in Russian).</p><h2 class="b-text__h2" id="BlocksReiteration">Blocks Reiteration</h2><p class="b-text__p">The second <tt>Menu Block</tt> can occur in the <tt>Foot Block</tt> of a site. Or, a <tt>Text Block</tt> can turn into two, separated by an advertisement.<br/> Even if a block was developed as a singular unit, the same one can appear on a page at any moment.</p><p class="b-text__p">In CSS related terms, it means:</p><ul class="b-text__ul"><li class="b-text__li">ID-based CSS selectors must not be used<br/>
   Only class selectors satisfy our non-uniqueness requirement.</li></ul><p class="b-text__p">On the JavaScript side it means:</p><ul class="b-text__ul"><li class="b-text__li">Blocks with similar behavior are detected unequivocally: they have the same CSS classes<br/>
   Using CSS class selectors allow picking all blocks with a given name to apply the required
   dynamic behavior.</li></ul><h2 class="b-text__h2" id="ModifiersforElementsandBlocks">Modifiers for Elements and Blocks</h2><p class="b-text__p">We often need to create a block very similar to an existing one, but with slightly altered its appearance or behavior.<br/> Let&apos;s say, we have a task:</p><ul class="b-text__ul"><li class="b-text__li">Add another <tt>Menu</tt> in the <tt>Footer</tt> with a <i>different layout</i>.</li></ul><div style="text-align: center">
<img src="images/site-footer-menu.png"/>
</div><p class="b-text__p">To avoid developing another block that is only minimally different from an existing one, we can use a <tt>modifier</tt>.</p><p class="b-text__p">A <tt>modifier</tt> is a property of a block or an element that alters its look or behavior.<br/> A modifier has a name and a value. Several modifiers can be used at once.</p><p class="b-text__p"><b>Example</b><br/> A block modifier specifies background color</p><div style="text-align: center">
<img src="images/search-background.png"/>
</div><p class="b-text__p"><b>Example</b><br/> An element modifier changes the look of the &quot;current&quot; item</p><div style="text-align: center">
<img src="images/menu-current-item.png"/>
</div><p class="b-text__p">From the input data point of view:</p><ul class="b-text__ul"><li class="b-text__li">In a BEM tree, modifiers are properties of an entity that describes a block or an element</li></ul><p class="b-text__p">For example, they can be attribute nodes in XML:</p><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu <span class="ohl-name ohl-name-attribute">m:size<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>big<span class="ohl-punctuation">&quot;</span></span></span> <span class="ohl-name ohl-name-attribute">m:type<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>buttons<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span></pre><p class="b-text__p">The same expressed in JSON:</p><pre class="ohl ohl_lang_js"><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">mods</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
   <span class="ohl-punctuation">{</span> <span class="ohl-name">size</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>big<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
   <span class="ohl-punctuation">{</span> <span class="ohl-name">type</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>buttons<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">]</span>
<span class="ohl-punctuation">}</span></pre><p class="b-text__p">From the CSS point of view:</p><ul class="b-text__ul"><li class="b-text__li">A modifier is an additional CSS class for a block or an element.</li></ul><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu menu_size_big menu_type_buttons<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></pre><pre class="ohl ohl_lang_js"><span class="ohl-operator">.</span><span class="ohl-name">menu_size_big</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-comment ohl-comment-single"><span class="ohl-punctuation">//</span> CSS code to specify height</span>
<span class="ohl-punctuation">}</span>
<span class="ohl-operator">.</span><span class="ohl-name">menu_type_buttons</span> <span class="ohl-operator">.</span><span class="ohl-name">menu__item</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-comment ohl-comment-single"><span class="ohl-punctuation">//</span> CSS code to change item&apos;s look</span>
<span class="ohl-punctuation">}</span></pre><p class="b-text__p">Element modifiers are implemented in the same fashion. Again, when writing CSS by hand, it is very important to use separators consistently for programmatic access.</p><p class="b-text__p">E.g., current menu item can be marked with a modifier:</p><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>Index<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item <span class="ohl-name ohl-name-attribute">m:state<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>current<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Products<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:item<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>Contact<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span></pre><pre class="ohl ohl_lang_js"><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
    <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Index<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-punctuation">{</span>
      <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
      <span class="ohl-name">mods</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>state<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>current<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Products<span class="ohl-punctuation">&apos;</span></span>
    <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Contact<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">]</span>
<span class="ohl-punctuation">}</span></pre><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Index<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item menu__item_state_current<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Products<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Contact<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span></pre><pre class="ohl ohl_lang_js"><span class="ohl-operator">.</span><span class="ohl-name">menu__item_state_current</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-name">font</span><span class="ohl-operator">-</span><span class="ohl-name">weight</span><span class="ohl-operator">:</span> <span class="ohl-name">bold</span><span class="ohl-punctuation">;</span>
<span class="ohl-punctuation">}</span></pre><h2 class="b-text__h2" id="SubjectMatterAbstraction">Subject-Matter Abstraction</h2><p class="b-text__p">When many people work on a project they should agree on a data domain and use it when naming their blocks and elements.</p><p class="b-text__p">For example, a <tt>Tag Cloud</tt> block is always named <tt>tags</tt>. Each of its elements is a <tt>tag</tt>. This convention spreads across all languages: CSS, JavaScript, XSL, etc.</p><p class="b-text__p">From the development process&apos; point of view:</p><ul class="b-text__ul"><li class="b-text__li">All participants operate on the same terms</li></ul><p class="b-text__p">From the CSS point of view:</p><ul class="b-text__ul"><li class="b-text__li">CSS for blocks and elements can be written in a pseudo language that compiles
   down to CSS according to the naming convention.</li></ul><pre class="ohl ohl_lang_js">  <span class="ohl-operator">.</span><span class="ohl-name">menu</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">__layout</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">display</span><span class="ohl-operator">:</span> <span class="ohl-name">inline</span><span class="ohl-punctuation">;</span>
    <span class="ohl-punctuation">}</span>
    <span class="ohl-name">__layout</span><span class="ohl-operator">-</span><span class="ohl-name">item</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">display</span><span class="ohl-operator">:</span> <span class="ohl-name">inline</span><span class="ohl-operator">-</span><span class="ohl-name">block</span><span class="ohl-punctuation">;</span>
      <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-punctuation">}</span>
    <span class="ohl-name">__item</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">_state_current</span> <span class="ohl-punctuation">{</span>
        <span class="ohl-name">font</span><span class="ohl-operator">-</span><span class="ohl-name">weight</span><span class="ohl-operator">:</span> <span class="ohl-name">bold</span><span class="ohl-punctuation">;</span>
      <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">}</span></pre><p class="b-text__p">On the JavaScript side:</p><ul class="b-text__ul"><li class="b-text__li">Instead of using class selectors directly to find DOM elements, a special helper
   library may be used.</li></ul><pre class="ohl ohl_lang_js"><span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">click</span><span class="ohl-punctuation">(</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">addClass</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item_state_current<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggle</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu_size_big<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggle</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu_size_small<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span></pre><p class="b-text__p">The naming convention for CSS classes of blocks and elements can change in the course of time. Using special JavaScript functions to access blocks and elements and to work with their modifiers makes it possible to change only these functions if the naming convention changes.</p><pre class="ohl ohl_lang_js"><span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">elem</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">click</span><span class="ohl-punctuation">(</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">elem</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">setMod</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>state<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>current<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggleMod</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>size<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>big<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>small<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span></pre><p class="b-text__p">The code above is abstract. In real life we use the JavaScript core of <tt>i-bem</tt> block from the <tt>bem-bl</tt> block library: <a class="b-link" href="http://bem.github.com/bem-bl/sets/common-desktop/i-bem/i-bem.ru.html">http://bem.github.com/bem-bl/sets/common-desktop/i-bem/i-bem.ru.html</a> (described in Russian)</p><h2 class="b-text__h2" id="Blocksconsistency">Blocks consistency</h2><p class="b-text__p">A site has a <tt>Button</tt> block with certain dynamic behavior.</p><div style="text-align: center">
<img src="images/button.png"/>
</div><p class="b-text__p">When a block is hovered, it changes its appearance.</p><div style="text-align: center">
<img src="images/button-cursor.png"/>
</div><p class="b-text__p">A manager could ask:</p><ul class="b-text__ul"><li class="b-text__li">to use the same button on another page</li></ul><p class="b-text__p">Having a CSS implementation of a block is not enough. Reusing a block also means reusing its behavior, described in JavaScript.</p><p class="b-text__p">So a block must &quot;know&quot; everything about itself. To implement a block we describe its appearance and behavior in all technologies being used - we call that <tt>multilingualism</tt>.</p><p class="b-text__p"><tt>Multilingual</tt> presentation is a description of a block in all the programming languages that are necessary to implement the view and the functionality of a block.</p><p class="b-text__p">To have a block present on a page as a UI element we need to implement it in the following techs:</p><ul class="b-text__ul"><li class="b-text__li">templates (XSL, TT2, JavaScript, etc), which turn block declarations into HTML code</li><li class="b-text__li">CSS that describes appearance of the block</li></ul><p class="b-text__p">If a block has dynamic behavior, we add it to this list:</p><ul class="b-text__ul"><li class="b-text__li">a JavaScript implementation for the block</li></ul><p class="b-text__p">Everything that constitutes a block is a technology, including images.</p><h2 class="b-text__h2" id="FileSystemRepresentationforaBlock">File System Representation for a Block</h2><h3 class="b-text__h3" id="Unequivocalplacementofcode">Unequivocal placement of code</h3><h4 class="b-text__h4" id="Filenaming">File naming</h4><p class="b-text__p">When a project is</p><ul class="b-text__ul"><li class="b-text__li">long-lived and under constant development</li></ul><p class="b-text__p">If the development team</p><ul class="b-text__ul"><li class="b-text__li">consists of several people</li><li class="b-text__li">grows and changes</li></ul><p class="b-text__p">Then, being able to navigate the code base quickly is crucial.</p><p class="b-text__p">Block code is easiest to find when it&apos;s placed in files using the same naming scheme as the one we use for naming our entities:</p><pre>
menu.xsl
menu.js
menu.css
</pre><h4 class="b-text__h4" id="Expressingblocksonafilesystem">Expressing blocks on a file system</h4><p class="b-text__p">There could be a task</p><ul class="b-text__ul"><li class="b-text__li">to reuse some blocks from a previous project in a new one</li></ul><p class="b-text__p">We want the procedure of block reuse to be as simple as possible - like simply copying the files, or using partial checkout of a repository from a &quot;donor&quot; project. In both cases it is useful to have all of the files under the same directory:</p><pre>
menu/
  menu.xsl
  menu.js
  menu.css
</pre><h4 class="b-text__h4" id="Filestructureofablock">File structure of a block</h4><p class="b-text__p">When working on a project we might need to change a block at some point.</p><p class="b-text__p">A manager could ask:</p><ul class="b-text__ul"><li class="b-text__li">to change the color of the <tt>Current Menu Item</tt>
or</li><li class="b-text__li">to make the <tt>Menu</tt> react on hover</li></ul><p class="b-text__p">A developer could ask their colleague:</p><ul class="b-text__ul"><li class="b-text__li">to help with <tt>Search Form</tt> styling for IE</li></ul><p class="b-text__p">To understand where the relevant code is located, follow these (or similar) rules:</p><ul class="b-text__ul"><li class="b-text__li">Block code is placed in a separate directory<ul class="b-text__ul"><li class="b-text__li">Directory name matches block name</li><li class="b-text__li">Implementation is placed under this directory</li></ul></li><li class="b-text__li">Elements are placed in subdirectories under the block directory<ul class="b-text__ul"><li class="b-text__li">Directory name matches element name</li><li class="b-text__li">Implementation is placed under this directory</li></ul></li><li class="b-text__li">Modifiers are placed in subdirectories under the block directory<ul class="b-text__ul"><li class="b-text__li">Directory name matches modifier name</li><li class="b-text__li">Implementation is placed under this directory</li><li class="b-text__li">File name includes both key and value of the modifier (again, for programmatic access)</li></ul></li></ul><p class="b-text__p"><b>Example</b><br/> File structure of a <tt>Menu</tt> block</p><pre>
menu/
  __item/
    _state/
      menu__item_state_current.css
      menu__item_state_current.xsl
    menu__item.css
    menu__item.xsl
  menu.css
  menu.js
  menu.xsl
</pre><p class="b-text__p">Maintaining such file structure manually is, quite obviously, not convenient. So we&apos;ve developed <a class="b-link" href="https://github.com/bem/bem-tools">BEM tools</a> to handle the burden. These tools help with creating the directory structure, placing files, generating placeholder content, etc.</p><h4 class="b-text__h4" id="Groupingblocksindirectories">Grouping blocks in directories</h4><p class="b-text__p">Big internet portals often need to reuse the same blocks across different sites.</p><p class="b-text__p">There could be a task:</p><ul class="b-text__ul"><li class="b-text__li">to create the same <tt>Footer</tt> on <i>all the portal&apos;s sites</i> or</li><li class="b-text__li">to create a <i>new project</i> using blocks from the existing sites</li></ul><p class="b-text__p">Working for a web design agency often means that one has to use typical solutions for typical web pages.</p><p class="b-text__p">A project manager could ask you:</p><ul class="b-text__ul"><li class="b-text__li">to create an order page with a web form <i>as on the previous project</i></li></ul><p class="b-text__p">We have to do these tasks while, preferably, avoiding copying blocks around manually. So it&apos;s nice to have a repository of shared blocks that can be linked to a project. Blocks then should be united under a single directory for that.</p><p class="b-text__p">Such a directory is usually called <tt>blocks</tt>.</p><p class="b-text__p"><b>E.g.</b></p><pre>
blocks/
  foot/
  head/
  menu/
  page/
  search/
</pre><p class="b-text__p">That directory can be linked to another project straight from the version control system, so that we can make changes to shared blocks in a single location.</p><h2 class="b-text__h2" id="LevelsofDefinition">Levels of Definition</h2><p class="b-text__p">If a group of blocks (united under one directory) is linked to a project directly (via a partial checkout, svn:externals, etc.), then every change committed for these blocks influences all projects.</p><p class="b-text__p">When developing a site based on an existing one we might want:</p><ul class="b-text__ul"><li class="b-text__li">to enlarge the font in the <tt>Head</tt> on site A without affecting site B</li><li class="b-text__li">to add animation when showing a dropdown menu.</li></ul><p class="b-text__p">To do so, we need to be able to define or redefine blocks in different technologies for a specific site only, or for certain pages only. It can be achieved using <tt>definition levels</tt>.</p><p class="b-text__p">A <tt>definition level</tt> is a set of blocks grouped in one directory.</p><div style="text-align:center;">
<img src="images/levels-schema.png"/>
</div><p class="b-text__p">An implementation of every block from the library can be changed (or completely redefined) at project level.</p><div style="text-align:center;">
<img src="images/block-levels.png"/>
</div><p class="b-text__p">From page-building process&apos; perspective:</p><ul class="b-text__ul"><li class="b-text__li">When building a page we can set a list of levels (directories) to use their blocks on
   the page. E.g.,
   <tt>build-page -l blocks-common -l blocks-my my-page.html</tt></li></ul><p class="b-text__p">From the file structure point of view:</p><ul class="b-text__ul"><li class="b-text__li">A project can have any number of levels. But only the levels that are evaluated during the build
   will be present on the page. It is possible to specify different sets of definition levels
   for different parts of the site.</li></ul><p class="b-text__p">On the JavaScript side:</p><ul class="b-text__ul"><li class="b-text__li">We need to define dynamic behavior of a page in declarative style.
   Final behavior is gathered from different definition levels. E.g.,</li></ul><pre class="ohl ohl_lang_js"><span class="ohl-comment ohl-comment-multiline"><span class="ohl-punctuation">/*</span> blocks-common/dropdown/dropdown.js <span class="ohl-punctuation">*/</span></span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>dropdown<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-name">init</span><span class="ohl-operator">:</span> <span class="ohl-keyword ohl-keyword-declaration">function</span><span class="ohl-punctuation">(</span><span class="ohl-punctuation">)</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
  <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>

<span class="ohl-comment ohl-comment-multiline"><span class="ohl-punctuation">/*</span> blocks-my/dropdown/dropdown.js <span class="ohl-punctuation">*/</span></span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>dropdown<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-name">init</span><span class="ohl-operator">:</span> <span class="ohl-keyword ohl-keyword-declaration">function</span><span class="ohl-punctuation">(</span><span class="ohl-punctuation">)</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">__base</span><span class="ohl-punctuation">(</span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
  <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span></pre><p class="b-text__p">From the viewpoint of a template engine:</p><ul class="b-text__ul"><li class="b-text__li">To be able not only to define but to redefine a template, one needs to
   apply a preceding template implementation.<br/>
   E.g., for XSL:</li></ul><pre class="ohl ohl_lang_xml"><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template <span class="ohl-name ohl-name-attribute">match<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>b:head<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div<span class="ohl-punctuation">&gt;</span></span> <span class="ohl-comment"><span class="ohl-punctuation">&lt;!--</span> Node for extra design <span class="ohl-punctuation">--&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:apply-imports<span class="ohl-punctuation">/&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>xsl:template<span class="ohl-punctuation">&gt;</span></span></pre><p class="b-text__p">From the architectural point of view:</p><ul class="b-text__ul"><li class="b-text__li">When developing a portal of several sites we can extract a block library that serves as one of the
   definition levels for all the sites which are part of the portal. The blocks for a specific
   site will form another level.</li><li class="b-text__li">The same repo can hold blocks of both desktop and mobile versions.<br/>
   Such a project will have the following levels: common, mobile, desktop.
   Different combinations of these levels give the resulting implementation, required by specific pages.</li></ul><p class="b-text__p"><a class="b-link" href="https://github.com/bem/bem-bl">Open source block library bem-bl</a> is an example of having several definition levels in one repository.</p><h2 class="b-text__h2" id="BuildingaPage">Building a Page</h2><p class="b-text__p">Working in terms of blocks means having a <tt>subject-matter abstraction</tt>. This abstraction is for developers only, browsers will get a compiled version of the code.</p><p class="b-text__p">So we have <tt>code for people</tt> and <tt>code for browsers</tt> - they are not the same.</p><ul class="b-text__ul"><li class="b-text__li">Programmers code blocks - browsers get the code for the whole page</li></ul><p class="b-text__p">To turn <tt>code for people</tt> into <tt>code for browsers</tt> we <tt>build</tt> a page.</p><p class="b-text__p"><tt>Building a page</tt> means generating HTML, CSS, and JavaScript code from a page declaration (written in XML or JSON) by applying implementations of declared blocks.</p><p class="b-text__p">On the CSS side:</p><ul class="b-text__ul"><li class="b-text__li">All CSS files are combined into a single &quot;page&quot; CSS file<br/>
   Despite the fact that CSS for every block, element or modifier is stored in separate
   files, we don&apos;t have to link these files to the page as-is. It is possible to
   collect all the required CSS implementations in one file.<br/>
   This also solves the well-known &apos;number of imports&apos; issue in IE and decreases the number of HTTP requests.
   For combining CSS we use <a class="b-link" href="https://github.com/veged/borschik">borschik</a>.</li><li class="b-text__li">Browser gets minimized code<br/>
   When building CSS, we can minimize and optimize CSS code using the
   <a class="b-link" href="https://github.com/afelix/csso">CSSO</a> utility, for example.</li><li class="b-text__li">Each browser can get CSS code written especially for it<br/>
   It is also possible to divide CSS implementations for different browsers and deliver
   only the code needed for each browser.<br/>
   <a class="b-link" href="https://github.com/afelix/setochka">setochka - currently in prototype</a> can be used for that.</li></ul><p class="b-text__p">From the JavaScript point of view:</p><ul class="b-text__ul"><li class="b-text__li">Similarly to CSS, JavaScript files can be combined into one.</li></ul><p class="b-text__p">From the template engine&apos;s point of view:</p><ul class="b-text__ul"><li class="b-text__li">Only needed templates are included<br/>
   Final set of templates that are used for displaying a page includes only the templates
   for required blocks. This boosts template performance and reduces the likelihood of side effects.</li></ul><p class="b-text__p">From the viewpoint of development process:</p><ul class="b-text__ul"><li class="b-text__li">Robots serve people (not the other way around)<br/>
   Developer writes code as they sees fit. &quot;Robots&quot; take (some) care of performance by optimizing the
   code (together with making it unreadable) when building a page.</li></ul><p class="b-text__p">In terms of work organization:</p><ul class="b-text__ul"><li class="b-text__li">Division of labor<br/>
   We have developers working on the core framework (compilers, tools, performance); library developers, who maintain
   the block library; application developers, who develop sites using the framework.</li></ul><p class="b-text__p">We use <a class="b-link" href="https://github.com/bem/bem-tools">BEM tools</a> to build pages.</p><h3 class="b-text__h3" id="Howtoautomatethebuildingprocess">How to automate the building process?</h3><p class="b-text__p">The usage of <a class="b-link" href="https://github.com/bem/bem-tools">bem tools</a> require to run several commands for each page whenever page input data or blocks implementation are changed. As a result of these commands you get CSS and JavaScript files for the page, page&apos;s template and, if you are developing static pages, HTML code of your page.</p><p class="b-text__p">To avoid to run these commands manually, there is also the <a class="b-link" href="http://www.gnu.org/software/make/manual/make.html">GNUmakefile</a> written for a project that includes the instructions how to build pages.<br/> You can find an example of such a file in the test project <a class="b-link" href="https://github.com/bem/bem-bl-test/blob/master/GNUmakefile">bem-bl-test</a>.</p><p class="b-text__p">But the usage of GNU make has a list of problems:</p><ul class="b-text__ul"><li class="b-text__li">You have to run it every time you have changed something;</li><li class="b-text__li">Every time you run gmake it reads the infromation on a disk. So the compilation
   process could not be fast.</li><li class="b-text__li">The pages you build depend not only on the content of block files but on their file structure
   as well. But it is impossible to write a gmake goal dependency in these terms.</li></ul><p class="b-text__p">So we would like to create something to replace GNU make for the process of page building. This will be both a development server and a tool to build production files. <tt>bem server</tt> will be run in a project root directory and give http response with page files built (so you won&apos;t need to run gmake manually after every changing).<br/> Besides, it will be able to watch files (adding and removing of them) via <a class="b-link" href="http://nodemanual.org/latest/nodejs_ref_guide/fs.FSWatcher.html">fs.FSWatcher</a> that helps to chache results efficiently.</p><h2 class="b-text__h2" id="Realexamples">Real examples</h2><p class="b-text__p"><a class="b-link" href="http://yandex.ru">Yandex</a> is a large (mostly Russian) company that use BEM methodology to develop its services.</p><p class="b-text__p">BEM methodology does not request you to use certain framework. You also don&apos;t have to use BEM for all the technologies you have on your pages (but that would be the most efficient).</p><p class="b-text__p"><a class="b-link" href="http://www.yandex.ru/all">All the services of Yandex</a> have BEM in their CSS and JavaScript code and XSL templates of the pages. E.g.,</p><ul class="b-text__ul"><li class="b-text__li"><a class="b-link" href="http://maps.yandex.ru/?text=%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D1%8F%2C%20%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&amp;amp;sll=37.609218%2C55.753559&amp;amp;ll=37.609218%2C55.753563&amp;amp;spn=2.570801%2C0.884460&amp;amp;z=9&amp;amp;l=map">Yandex.Maps</a></li><li class="b-text__li"><a class="b-link" href="http://images.yandex.ru/yandsearch?text=Yandex+office&amp;amp;rpt=image">Yandex.Images</a><br/>
   This is a service for searching images in the Internet.</li><li class="b-text__li"><a class="b-link" href="http://video.yandex.ru/#search?text=yac%202011">Yandex.Video</a><br/>
   This is a service for both hosting and searching images.</li><li class="b-text__li"><a class="b-link" href="http://auto.yandex.ru/">Yandex.Auto</a></li><li class="b-text__li"><a class="b-link" href="http://www.yandex.com.tr/">Turkish Yandex</a></li></ul><p class="b-text__p">Some services don&apos;t use XSL templates and build their pages with our newest template product, <tt>bemhtml</tt> template engine which was mentioned above. These are the following services:</p><ul class="b-text__ul"><li class="b-text__li"><a class="b-link" href="http://yandex.ru/yandsearch?text=BEM+methodology+front-end&amp;amp;lr=213">Yandex Search</a><br/>
   or <a class="b-link" href="http://yandex.com/yandsearch?text=%22What+is+BEM%3F%22+front-end&amp;amp;lr=213">Yandex Search in English</a></li><li class="b-text__li"><a class="b-link" href="http://apps.yandex.ru/">Mobile Apps Search</a><br/>
   This site is to look under smartphones.</li></ul><p class="b-text__p">There are also other companies that use BEM methodology.</p><p class="b-text__p">For example, guys in <a class="b-link" href="http://mail.ru">Mail.ru</a> partly use BEM for their services. Some blocks on their pages are BEM-based in terms of CSS code. They also have their own C++ template engine and write block templates according to the methodology.</p><p class="b-text__p">More examples:</p><ul class="b-text__ul"><li class="b-text__li"><a class="b-link" href="http://beta.news.rambler.ru/">Rambler.News</a></li><li class="b-text__li"><a class="b-link" href="http://hh.ru/">HeadHunter</a></li><li class="b-text__li"><a class="b-link" href="http://futurecolors.ru/tnkracing/">TNK Racing Team</a></li></ul><p class="b-text__p">You may also be interested in sites that use <a class="b-link" href="http://bem.github.com/bem-bl/index.ru.html">bem-bl</a> block library:</p><ul class="b-text__ul"><li class="b-text__li"><a class="b-link" href="http://mishanga.pro/">Mikhail Troshev vCard</a><br/>
   Source code is hosted at GitHub: <a class="b-link" href="https://github.com/mishanga/bem-vcard">https://github.com/mishanga/bem-vcard</a></li><li class="b-text__li"><a class="b-link" href="http://form.dev.eot.su/">BEM based web form with JZ validation</a></li></ul><h2 class="b-text__h2" id="RelatedLinks">Related Links</h2><h3 class="b-text__h3" id="Libraries">Libraries</h3><ul class="b-text__ul"><li class="b-text__li"><a class="b-link" href="http://bem.github.com/bem-bl/index.en.html">An open source block library bem-bl</a></li></ul><h3 class="b-text__h3" id="Tools">Tools</h3><ul class="b-text__ul"><li class="b-text__li"><a class="b-link" href="https://github.com/bem/bem-tools">Tools for working with files according to BEM methodology</a></li><li class="b-text__li"><a class="b-link" href="https://github.com/veged/borschik">Borschik</a><br/>
   A utility for building static files into one.</li><li class="b-text__li"><a class="b-link" href="https://github.com/afelix/setochka">Setochka, a working prototype</a><br/>
   A tool for dividing CSS into several browser-specific files.</li><li class="b-text__li"><a class="b-link" href="https://github.com/afelix/csso">CSSO</a><br/>
   A utility that performs advanced, structural optimizations of CSS code</li></ul><h3 class="b-text__h3" id="Additionalinformation">Additional information</h3><ul class="b-text__ul"><li class="b-text__li"><a class="b-link" href="http://www.youtube.com/watch?v=pjPMTrhciUI&amp;amp;feature=youtu.be">How to Install BEM tools on Mac, screencast</a></li><li class="b-text__li"><a class="b-link" href="http://clubs.ya.ru/bem/posts.xml?tag=64664080">Presentations and workshops video</a> (in Russian)</li><li class="b-text__li"><a class="b-link" href="http://clubs.ya.ru/bem/">BEM club on Ya.Ru</a> (in Russian)</li><li class="b-text__li"><a class="b-link" href="http://www.facebook.com/#!/groups/209713935765634/">BEM on Facebook</a></li></ul></div></body></html>