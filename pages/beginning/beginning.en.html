<div class="shmakowiki"><h2>What is BEM?</h2><p>This article describes the theoretical aspects of web-developing for a big company. Except the theory we certainly have practical things such as libraries and tools. You can find links to them in the article.</p><p>There is plenty of sites developed at Yandex, thousands in fact. The approaches we use for HTML/CSS markup and for others front end code are in constant evolution.</p><p>Projects developed for a big portal and the process of developing for such usually have a range of specifics.</p><ul><li>Typical projects ought to be developed fast, but they should also live long<br/>
   It needs to be able to create a project in a short period of time with an
   architecture which will help to maintain it for a long time.</li><li>Numerous people work for a project<br/>
   It has to be able to organize work efficiently for teams either of
   1-2 developers or larger numbers.</li><li>Team scalability<br/>
   The adding of new people to a team has to improve its productivity. There needs
   to exist an ability to commit new developers to work and assign them their
   own parts of the project.<br/>
   To be able to work with the same code for a long time with different members of
   the team, the code has to be well-structured.</li><li>Code reuse<br/>
   New projects of an interface element don&apos;t have to be written from
   scratch. If there is a similar task done for the company, it needs to maximize
   reuse of the code derived.</li></ul><p>We looked for solutions to our problems. And at one point they became <tt>BEM methodology</tt>.<br/> <tt>BEM</tt> means Block, Elemen, Modifier. The meanings of these terms are given further in the article.</p><p>One of the most widespread examples of a methodology in  programming is OOP. This is a programming paradigm embodied by many languages. The same applies for BEM methodology. This is a way to describe reality in code, a range of patterns and a way of thinking about entities whatever programming language is used.<br/> Based on this methodology we created some front end developing approaches and technical solutions which enable us to put out new pages fast and maintain existing pages easily.</p><p>The principles of our code and work process are the following:</p><h2>Unified data domain</h2><p>Imagine an ordinary site. The same as in a picture.</p><div style="text-align:center">
<img src="images/site.png"/>
</div><p>While developing and maintainting a site it is useful to mark out &quot;blocks&quot; of which the site consists.<br/> For example, in this picture there are <tt>Head</tt>, <tt>Main Layout</tt> and <tt>Foot</tt>. The Head in-turn consists of <tt>Logo</tt>, <tt>Search</tt>, <tt>Auth block</tt> and <tt>Menu</tt>. The Main Layout contains <tt>Page Title</tt> and <tt>Text Block</tt>.</p><div style="text-align:center">
<img src="images/site-marked.png"/>
</div><p>Giving each part of the page has its own name makes it very useful when it comes to team communication.<br/> A manager could ask:</p><ul><li>to enlarge the <tt>Head</tt> or</li><li>to create one more page with a <tt>Head</tt> without <tt>Search</tt></li></ul><p>You could ask a JavaScript developer</p><ul><li>to make <tt>Auth Block</tt> animated, etc.</li></ul><p>That is</p><h3>Block</h3><p>We call as <tt>block</tt> an independent entity, a &quot;building block&quot; of a application. A block can be either simple or complicated (containing other blocks).</p><p><b>e.g.</b><br/> Search form block<br/></p><div style="text-align:center">
<img src="images/search-block.png"/>
</div><h3>Element</h3><p>An Element is a part of a block that performs a certain function. There&apos;s no point of an element without its block.</p><p><b>e.g.</b><br/> An input field and a button are elements of the Search Block</p><div style="text-align:center">
<img src="images/search-block-marked.en.png"/>
</div><h2>Facilities of describing pages and templates</h2><p>Blocks and elements are a page&apos;s content. Besides the fact of being on the page, their arrangement is also important.</p><p>Blocks (or elements) can be situated in a special order:</p><p>For example, a list of goods in an Internet shop:</p><div style="text-align:center">
<img src="images/goods-list.png"/>
</div><p>Or menu items:</p><div style="text-align:center">
<img src="images/menu-items.png"/>
</div><p>A block can be included in another:</p><p>For example, a <tt>Head Block</tt> includes other blocks:</p><div style="text-align:center">
<img src="images/head-marked.png"/>
</div><p>There has to be a way to describe a page in text to be able to change the page&apos;s content, to add new blocks and to move the blocks within the page. That requires each block and element to have a key word.</p><p>A key word designating a concrete block is called <tt>block name</tt>.</p><p>For example, <tt>menu</tt> is a key word for <tt>Menu Block</tt>, or <tt>head</tt> is a key work fod a <tt>Head</tt>.</p><p>A key word designating an element is called <tt>element name</tt>.</p><p>For example, each point of a menu is an element <tt>item</tt> of <tt>menu</tt> block.</p><p>Block name must be unique, it unequivocally designates which block is described. Only the same blocks can have same block names. In this case we say that one block is represented on the page 2 (3, 4, ...) times.</p><p>An element name must be unique only within the scope of block. An element can be repeated several times. For example, menu items.</p><div style="text-align:center">
<img src="images/menu-items.png"/>
</div><p>It&apos; necessary to place the key words in certain order. Data formats with nesting will do for it. For example, XML or JSON:</p><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:page<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:head<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
      ...
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:logo<span class="ohl-punctuation">/&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:column<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:search<span class="ohl-punctuation">&gt;</span></span>
        <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:input<span class="ohl-punctuation">/&gt;</span></span>
        <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:button<span class="ohl-punctuation">&gt;</span></span>Search<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:button<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:search<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:column<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:auth<span class="ohl-punctuation">&gt;</span></span>
        ...
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:auth<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:column<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:head<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:page<span class="ohl-punctuation">&gt;</span></span></code></pre><p>In this example namespaces <tt>b</tt> and <tt>e</tt> separate block nodes from element nodes.</p><p>The same in JSON:</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>page<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>head<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
    <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
      <span class="ohl-punctuation">{</span> <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>logo<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
      <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
          <span class="ohl-punctuation">{</span>
            <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>search<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
              <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>input<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
              <span class="ohl-punctuation">{</span>
                <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>button<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
                <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Search<span class="ohl-punctuation">&apos;</span></span>
              <span class="ohl-punctuation">}</span>
            <span class="ohl-punctuation">]</span>
          <span class="ohl-punctuation">}</span>
        <span class="ohl-punctuation">]</span>
      <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>column<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
          <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>auth<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
          <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
        <span class="ohl-punctuation">}</span>
      <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">]</span>
  <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></code></pre><p>The examples above show the object model with a nesting for blocks and elements to other blocks. There is also optional data in the page description.<br/> This structure we call <tt>BEM tree</tt> (on analogy from DOM tree).</p><p>Final HTML for a browser comes from BEM tree by applying templates (for example, XSL or Javascript).</p><p>If a developer needs to move a block to a different place on the page, it&apos;s done by changing a tree. Templates make the final view themselves.</p><p>In our last products we&apos;ve gone with JSON as a format for describing a page. It turns into HTML by a JavaScript-based template engine.<br/> The links for concrete tools can be found at the end of this article.</p><h2>Block independence</h2><p>While developing a long-term project there could be a desire to move a block.<br/> E.g.</p><ul><li>to swap <tt>Logo</tt> and <tt>Auth Block</tt> or</li><li>to place <tt>Menu</tt> under <tt>Search Block</tt></li></ul><div style="text-align: center">
<img src="images/head.png"/>
</div><div style="text-align: center">
<img src="images/head-changed.png"/>
</div><p>To make this process easier blocks must be <tt>independent</tt>.</p><p>An <tt>independent</tt> block is implemented so that it can be placed anywhere on the page. And to be included in another block as well.</p><h3>Independent CSS</h3><p>From block&apos;s CSS view point this mean that</p><ul><li>A block (or an element) must have a unique &quot;name&quot; for which can be written a CSS rule.
   E.g., a class.</li><li>There mustn&apos;t be CSS selectors for tags.</li><li>Cascade selectors for several blocks should be avoided.</li></ul><h4>Naming for independent CSS classes</h4><p>One of possible namings for CSS classes satisfying the requirements is the following:</p><ul><li>CSS class for a block coincide with its <tt>block name</tt></li></ul><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></code></pre><ul><li>CSS class for an element is a <tt>block name</tt> and an <tt>element name</tt> divided
 by a symbol (or symbols)</li></ul><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    ...
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    ...
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></code></pre><p>It is necessary to include a block name in a CSS class for an element to minimize a cascade.</p><p>Naming rules for CSS classes can be different. Read <a href="http://bem.github.com/bem-bl/pages/naming/naming.eb.wiki">here</a> about a naming convention we use.</p><h3>Independent templates</h3><p>From template engine&apos;s point of view block independence means that:</p><ul><li>Blocks and elements must be described in incoming data<br/>
   A block (or an element) must have a unique &quot;name&quot; for the possibility to tell a template engine
   &quot;The Menu must be placed here&quot;.</li><li>A block can be easily placed in every place in BEM tree</li></ul><h4>Independent templates for blocks</h4><p>Comingupon the block in the incoming data a template engine must unambiguously transform it into HTML. Every block must have its template for that.</p><p>For example, this can look like this in XSL:</p><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template <span class="ohl-name ohl-name-attribute">match<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>b:menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:apply-templates<span class="ohl-punctuation">/&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>xsl:template<span class="ohl-punctuation">&gt;</span></span>

<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template <span class="ohl-name ohl-name-attribute">match<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>b:menu/e:item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:apply-templates<span class="ohl-punctuation">/&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template<span class="ohl-punctuation">&gt;</span></span></code></pre><p>We gradually reject XSL for our products for our own JavaScript based template engine <a href="https://github.com/veged/xjst">XJST</a>. This template engine absorbs all that we like in XSL, but implements it with JavaScript&apos;s productivity at either client or server side.<br/> We write our templates on domain specific language BEMHTML based on XJST. <a href="http://clubs.ya.ru/bem/replies.xml?item_no=992">The main ideas of BEMHTML</a> are published in BEM club at Ya.Ru (in Russian).</p><h2>Blocks reiteration</h2><p>The second <tt>Menu Block</tt> can occur in the <tt>Foot block</tt> of a site. Or one <tt>Text Block</tt> can turn into two separated by an advertisement.<br/> Even if a block was developed as a singular unit, the same one can appear at any moment.</p><p>From CSS&apos;s viewpoint this means that:</p><ul><li>CSS id selectors are not used<br/>
   It is convinient to use CSS classes</li></ul><p>From JavaScript&apos;s viewpoint this means that:</p><ul><li>The blocks with similar behaviour can be detected unequivocally: they have the same CSS classes<br/>
   Using CSS class selectors it is possible to pick out all the same blocks on the page, and to specify
   them the dynamic behaviour wanted.</li></ul><h2>Modifiers for elements and blocks</h2><p>There can be a situation when there needs not only to reiterate a block but also to make slight changes for it.<br/> E.g. there is a task:</p><ul><li>Create one more <tt>Menu</tt> in <tt>Footer</tt> with <i>another layout</i>.</li></ul><div style="text-align: center">
<img src="images/site-footer-menu.png"/>
</div><p>To avoid developing of a block that is minimally different from the existed one, it needs to use <tt>modifier</tt>.</p><p>A <tt>modifier</tt> is a block&apos;s or element&apos;s property which change a litte its view or behaviour.<br/> A modifier has a name and a value. You can use several modifiers at the same time.</p><p><b>e.g.</b><br/> A block&apos;s modifier specifies background color</p><div style="text-align: center">
<img src="images/search-background.png"/>
</div><p><b>e.g.</b><br/> An element&apos;s modofier for the current item changes its view</p><div style="text-align: center">
<img src="images/menu-current-item.png"/>
</div><p>From an input data&apos;s point of view:</p><ul><li>In the BEM tree modifiers are properties of the entity that describes a block or an element</li></ul><p>E.g, they are node attributes in XML:</p><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu <span class="ohl-name ohl-name-attribute">m:size<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>big<span class="ohl-punctuation">&quot;</span></span></span> <span class="ohl-name ohl-name-attribute">m:type<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>buttons<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span></code></pre><p>The same in JSON:</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">mods</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
   <span class="ohl-punctuation">{</span> <span class="ohl-name">size</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>big<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
   <span class="ohl-punctuation">{</span> <span class="ohl-name">type</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>buttons<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">]</span>
<span class="ohl-punctuation">}</span></code></pre><p>From the viewpoint of CSS:</p><ul><li>A modifier is an additional CSS class for a block or an element.</li></ul><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu menu_size_big menu_type_buttons<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  ...
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span></code></pre><pre class="ohl ohl-js"><code><span class="ohl-operator">.</span><span class="ohl-name">menu_size_big</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-comment ohl-comment-single"><span class="ohl-punctuation">//</span> CSS code to change height</span>
<span class="ohl-punctuation">}</span>
<span class="ohl-operator">.</span><span class="ohl-name">menu_type_buttons</span> <span class="ohl-operator">.</span><span class="ohl-name">menu__item</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-comment ohl-comment-single"><span class="ohl-punctuation">//</span> CSS code to change item&apos;s view</span>
<span class="ohl-punctuation">}</span></code></pre><p>Modifiers for elements are imptemented on analogy.</p><p>E.g. a current menu item can be marked with a modifier:</p><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>b:menu<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>Index<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item <span class="ohl-name ohl-name-attribute">m:state<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>current<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Products<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>e:item<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>Contact<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>e:item<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>b:menu<span class="ohl-punctuation">&gt;</span></span></code></pre><pre class="ohl ohl-js"><code><span class="ohl-punctuation">{</span>
  <span class="ohl-name">block</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
  <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
    <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Index<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-punctuation">{</span>
      <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
      <span class="ohl-name">mods</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>state<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>current<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
      <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Products<span class="ohl-punctuation">&apos;</span></span>
    <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Contact<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">]</span>
<span class="ohl-punctuation">}</span></code></pre><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>ul <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Index<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item menu__item_state_current<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Products<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>li <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__layout-unit<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
      <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div <span class="ohl-name ohl-name-attribute">class<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>menu__item<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>Contact<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>li<span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>ul<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span></code></pre><pre class="ohl ohl-js"><code><span class="ohl-operator">.</span><span class="ohl-name">menu__item_state_current</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-name">font</span><span class="ohl-operator">-</span><span class="ohl-name">weight</span><span class="ohl-operator">:</span> <span class="ohl-name">bold</span><span class="ohl-punctuation">;</span>
<span class="ohl-punctuation">}</span></code></pre><h2>Subject abstraction</h2><p>If there are many people who work for a project, they should arrange for a data domain. All the bloks of a project must have definite names used in code.</p><p>E.g. a block <tt>Tag Cloud</tt> is always called <tt>tags</tt>. Each of its element is a <tt>tag</tt>. This is right for every language: CSS, JavaScript, XSL, etc.</p><p>From the development process&apos; point of view:</p><ul><li>All the participants operate with the same terms</li></ul><p>From the viewpoint of CSS:</p><ul><li>CSS for blocks and elements can be written in a pseudo language which then is compiled
   into a pure CSS according to the naming convention.</li></ul><pre class="ohl ohl-js"><code>  <span class="ohl-operator">.</span><span class="ohl-name">menu</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">__layout</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">display</span><span class="ohl-operator">:</span> <span class="ohl-name">inline</span><span class="ohl-punctuation">;</span>
    <span class="ohl-punctuation">}</span>
    <span class="ohl-name">__layout</span><span class="ohl-operator">-</span><span class="ohl-name">item</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">display</span><span class="ohl-operator">:</span> <span class="ohl-name">inline</span><span class="ohl-operator">-</span><span class="ohl-name">block</span><span class="ohl-punctuation">;</span>
      <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-punctuation">}</span>
    <span class="ohl-name">__item</span> <span class="ohl-punctuation">{</span>
      <span class="ohl-name">_state_current</span> <span class="ohl-punctuation">{</span>
        <span class="ohl-name">font</span><span class="ohl-operator">-</span><span class="ohl-name">weight</span><span class="ohl-operator">:</span> <span class="ohl-name">bold</span><span class="ohl-punctuation">;</span>
      <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">}</span>
  <span class="ohl-punctuation">}</span></code></pre><p>From the JavaScript&apos;s point of view:</p><ul><li>Do not use CSS class selector to get a block&apos;s or an elements&apos; DOM object.</li></ul><pre class="ohl ohl-js"><code><span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">click</span><span class="ohl-punctuation">(</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">addClass</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu__item_state_current<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">$</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggle</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu_size_big<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggle</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu_size_small<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span></code></pre><p>The naming convention for CSS classes of blocks and elements can be changed. Using special JavaScript functions for an access to the blocks and the elements and in order to work with their modifiers makes it possible to change these functions only.</p><pre class="ohl ohl-js"><code><span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">elem</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">click</span><span class="ohl-punctuation">(</span> <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span> <span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">elem</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>item<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">setMod</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>state<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>current<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>menu<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-operator">.</span><span class="ohl-name">toggleMod</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>size<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>big<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>small<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span></code></pre><p>The code above is abstract. In our real products we use a JavaScript core of <tt>i-bem</tt> block from <tt>bem-bl</tt> block library: <a href="http://bem.github.com/bem-bl/sets/common-desktop/i-bem/i-bem.ru.html">http://bem.github.com/bem-bl/sets/common-desktop/i-bem/i-bem.ru.html</a></p><h2>A block&apos;s consistency</h2><p>A site has a <tt>Button</tt> block which has its dymanic behaviour.</p><div style="text-align: center">
<img src="images/button.png"/>
</div><p>When a cursor hovers on the block, it changes its appearance.</p><div style="text-align: center">
<img src="images/button-cursor.png"/>
</div><p>A manager could ask:</p><ul><li>to use the same button on another page</li></ul><p>The CSS implementation of the block is insufficient. In this case to reiterate the block we must reiterate its behaviour which is described in JavaScript as well.</p><p>So a block must &quot;know&quot; everything about itself. That is a block&apos;s implementation. This means that its view and behaviour is realized in all the technologies needed. That we call <tt>multilengualism</tt>.</p><p><tt>Multilingualism</tt> is a description of a block in all the programming languages which are neccessary for its functionality.</p><p>If a block has to be viewed on a page, it has to have the following techs:</p><ul><li>templates (XSL, TT2, JavaScript, etc), which turn block&apos;s declaration into page&apos;s HTML code</li><li>CSS that describes a block&apos;s view</li></ul><p>If a block has a dynamic behaviour, we add it to this list:</p><ul><li>a JavaScript implementation for the block</li></ul><p>Everything that concern the block is its technology. E.g.:</p><ul><li>A block&apos;s images</li></ul><h2>File system representation for a block</h2><h3>Unequivocal place of code</h3><h4>File naming</h4><p>If a project</p><ul><li>lives long and it&apos;s always acquiring new features</li></ul><p>If a  developing team</p><ul><li>consits of several people</li><li>grows and changes (new people appear)</li></ul><p>All this in turn mean that needs a way to find block&apos;s code files fast.</p><p>A block&apos;s code is easy to find if it&apos;s placed in files with the same name as a block key word is:</p><pre>
menu.xsl
menu.js
menu.css
</pre><h4>File independence of a block</h4><p>There could be a task</p><ul><li>to use some blocks from a previous project for a new one</li></ul><p>For doing it easily we have to be able to deliver a block&apos;s implementation (in all its techs) to another place. This can be done by file copying or partial checkout of a repo from a donor project. In both these cases it is useful if all block&apos;s files are gathered in the same directory:</p><pre>
menu/
  menu.xsl
  menu.js
  menu.css
</pre><h4>File structure of a block</h4><p>When working on a project there can appear a neccessity to change a block.</p><p>A manager could ask:</p><ul><li>to change a color of a <tt>Current Menu Point</tt>
or</li><li>to make a <tt>Menu</tt> reacting on cursor&apos;s hovering</li></ul><p>One developer could ask another:</p><ul><li>to help with <tt>Search Form</tt> markup for IE</li></ul><p>To understand where is the code discussed we have to follow these rules when developing:</p><ul><li>A block&apos;s code is placed in a separate directory<ul><li>The directory&apos;s name coincides with the blocks&apos; name</li><li>The block&apos;s technical implementation is placed in the files in block&apos;s directory</li></ul></li><li>An element has a subdirectory in its block&apos;s directory<ul><li>The subdirectory&apos;s name coincides with the element&apos;s name</li><li>The technical implementation of an elemnet is placed in the files in this subdirectory</li></ul></li><li>A modifier has a subdirectory in its block&apos;s directory<ul><li>The subdirectory&apos;s name coincides with the modifier&apos;s name</li><li>The technical implementation of the modifier is placed in the files in this subdirectory</li><li>A file name includes both a key and a value of a modifier</li></ul></li></ul><p><b>E.g.</b><br/> A file structure of a <tt>Menu</tt> block</p><pre>
menu/
  __item/
    _state/
      menu__item_state_current.css
      menu__item_state_current.xsl
    menu__item.css
    menu__item.xsl
  menu.css
  menu.js
  menu.xsl
</pre><p>Maintaining this file structure manually is not convenient. So we use <a href="https://github.com/bem/bem-tools">BEM tools</a> to work with files. These are a range of utilities that enable us to create files with certain names, file place and a content.</p><h4>Grouping blocks in directories</h4><p>A big portal needs to have the same block in different sites.</p><p>There could be a task:</p><ul><li>to create the same <tt>Footer</tt> on <i>all the portal&apos;s services</i> or</li><li>to create a <i>new project</i> using the blocks for existing ones</li></ul><p>Developing for a web design company, often means that onr has to use typical solutions for typical web pages.</p><p>A manager could ask:</p><ul><li>to create an order page with a web form <i>as on previous project</i></li></ul><p>We have to do these tasks and avoid to copy blocks&apos; files from project to project. There needs be an opportunity to link up the blocks from one project to another. Blocks have to be united in one directory for that.</p><p>We call such a directory <tt>blocks</tt>.</p><p><b>E.g.</b></p><pre>
blocks/
  foot/
  head/
  menu/
  page/
  search/
</pre><p>That directory can be linked up to another project straight from a repo. So a block&apos;s code is kept in one place. If we need to correct something or to make other changes, we do it in one place only.</p><h3>Levels of defenition</h3><p>If a group of blocks (united in one directory) is linked up to a project directly (via a partial checkout or svn:externals), then every changing commited for these blocks influences to both projects.</p><p>When developing a site based on another existing one it may need:</p><ul><li>to enlarge a font in <tt>Head</tt> on a site (without affecting the previous site),</li><li>to add an animation when showing a dropdown menu.</li></ul><p>Then there is a need to define or redefine blocks in different technologies for one site only or for certain pages only. It is owed to <tt>defining levels</tt>.</p><p>A <tt>defining level</tt> is a set of blocks&apos; implementations grouped in one directory.</p><div style="text-align:center;">
<img src="images/levels-schema.png"/>
</div><p>An implementation of every block from a library can be expanded (or redefined) at a project&apos;s level.</p><div style="text-align:center;">
<img src="images/block-levels.png"/>
</div><p>From the viewpoint of the process of building a page:</p><ul><li>When building a page we can set a list of levels (directories) to use their blocks on
   the page. E.g.,
   <tt>build-page -l blocks-common -l blocks-my my-page.html</tt></li></ul><p>From the file structure&apos;s poitn of view:</p><ul><li>A project can have any number of levels. But only the levels that are enumerated when builing
   will be on the page. It is possibly to make different sets of defining levels
   for different parts of the site.</li></ul><p>From the JavaScript&apos;s point of view:</p><ul><li>There is need to define a dynamic behaviour of a page in a declarative style.
   Final behaviour has to be gathered from different defining levels. E.g.,</li></ul><pre class="ohl ohl-js"><code><span class="ohl-comment ohl-comment-multiline"><span class="ohl-punctuation">/*</span> blocks-common/dropdown/dropdown.js <span class="ohl-punctuation">*/</span></span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>dropdown<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-name">init</span><span class="ohl-operator">:</span> <span class="ohl-keyword ohl-keyword-declaration">function</span><span class="ohl-punctuation">(</span><span class="ohl-punctuation">)</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
  <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>

<span class="ohl-comment ohl-comment-multiline"><span class="ohl-punctuation">/*</span> blocks-my/dropdown/dropdown.js <span class="ohl-punctuation">*/</span></span>
<span class="ohl-name">Block</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>dropdown<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-punctuation">{</span>
  <span class="ohl-name">init</span><span class="ohl-operator">:</span> <span class="ohl-keyword ohl-keyword-declaration">function</span><span class="ohl-punctuation">(</span><span class="ohl-punctuation">)</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">__base</span><span class="ohl-punctuation">(</span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
  <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span></code></pre><p>From the viewpoint of a template engine:</p><ul><li>To be able not only to define but to redefine a template one needs to
   apply previous implementation for a template.<br/>
   E.g., for XSL:</li></ul><pre class="ohl ohl-xml"><code><span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:template <span class="ohl-name ohl-name-attribute">match<span class="ohl-punctuation">=</span><span class="ohl-string ohl-string-double"><span class="ohl-punctuation">&quot;</span>b:head<span class="ohl-punctuation">&quot;</span></span></span><span class="ohl-punctuation">&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>div<span class="ohl-punctuation">&gt;</span></span> <span class="ohl-comment"><span class="ohl-punctuation">&lt;!--</span> Node for extra design <span class="ohl-punctuation">--&gt;</span></span>
    <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;</span>xsl:apply-imports<span class="ohl-punctuation">/&gt;</span></span>
  <span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>div<span class="ohl-punctuation">&gt;</span></span>
<span class="ohl-name ohl-name-tag"><span class="ohl-punctuation">&lt;/</span>xsl:template<span class="ohl-punctuation">&gt;</span></span></code></pre><p>From a project architechture&apos;s point of view:</p><ul><li>When developing a portal of several sites we can sort out a blocks library which is one of
   defining levels for all the sites of the portal. And the blocks for a concrete site
   can be united in another level.</li><li>The same repo can have blocks of both desktop and mobile browsers.<br/>
   Such a project has defining levels of common blocks, mobile blocks and desktop blocks.
   Different combinations of these levels give the implementation needed on concrete
   pages.</li></ul><p><a href="https://github.com/bem/bem-bl">Open source block library bem-bl</a> can be an example of having several defining levels in one repo.</p><h2>Building a page</h2><p>Working in terms of blocks means that there exists <tt>subject abstraction</tt>. This is obligatory only when a programmer work with code. When code gets to a browser subject abstraction is not neccessary. It is important only to save a design and behaviour of every block on the page.</p><p>So, there is a <tt>code for people</tt> and a <tt>code for browsers</tt>. They are not the same one.</p><ul><li>A programmer writes a code for blocks, a browser gets a code for the whole page</li></ul><p>To turn a <tt>code fo people</tt>  into <tt>code for a browser</tt> we <tt>build</tt> a page.</p><p><tt>Building a page</tt> is making a page&apos;s code in different technologies (HTML, CSS, JavaScript) based on a page declaration (XML or JSON) by applying implementations of the blocks declared</p><p>From the CSS&apos; point of view:</p><ul><li>The block files are gathered in one page file<br/>
   Despite the fact that CSS for every block, element or modifier is placed in a separate
   file, there is no need to link up these files to the page as is. It is possible to
   collect all the CSS implementation needed in one file.<br/>
   In addition that solves the problem of limitation for CSS imports in IE and descreases
   the number of HTTP requests.
   We use the <a href="https://github.com/veged/borschik">borschik</a> tool to unite all CSS in one
   file.</li><li>A browser gets minimized code<br/>
   When building we can minimize and optimize a CSS code. E.g. using the
   <a href="https://github.com/afelix/csso">CSSO</a> utility.</li><li>Each browser can get a CSS code written especially for it<br/>
   There is a possibility to divide CSS implementations for different browsers and deliver
   only the code needed for each browser.<br/>
   A <a href="https://github.com/afelix/setochka">setochka, a prototype</a> can be used for that.</li></ul><p>From the JavaScript&apos;s point of view:</p><ul><li>There are many files for blocks, and there is one file for a page<br/>
   The same as in the CSS&apos; case, a JavaScript implementation of all the blocks
   needed can be united in one file.</li></ul><p>From the template engine&apos;s point of view:</p><ul><li>Only needed templates work<br/>
   A final set of templates that is used for creating an HTML for a page has only the templates
   for the blocks required. Because of that a template productivity increases and the probability
   of appearing side effects is diminished.</li></ul><p>From the viewpoint of developing process:</p><ul><li>Robots serve for people (not counterwise)<br/>
   A developer writes a code in an easy way. &quot;Robots&quot; take care of the productivity by optimizing the
   code (and probably making it unreadable) when building a page.</li></ul><p>From the viewpoint of labor organization</p><ul><li>Division of labour<br/>
   There are developers to create blocks. And there are developers to optimize the final product.</li></ul><p>We use <a href="https://github.com/bem/bem-tools">BEM tools</a> to build pages.</p><h1>Related links</h1><h3>Libraries</h3><ul><li><a href="http://bem.github.com/bem-bl/index.en.html">An open source block library bem-bl</a></li></ul><h3>Tools</h3><ul><li><a href="https://github.com/bem/bem-tools">Tools for working with files accroding to BEM methodology</a></li><li><a href="https://github.com/veged/borschik">Borschik</a><br/>
   An utility to build static files into one.</li><li><a href="https://github.com/afelix/setochka">Setochka, a prototype</a><br/>
   A tool to divide CSS in several browser-oriented files.</li><li><a href="https://github.com/afelix/csso">CSSO</a><br/>
   A utility that optimizes a CSS code with a glance of its structure.</li></ul><h3>Supplement information</h3><ul><li><a href="http://clubs.ya.ru/bem/posts.xml?tag=64664080">Presentations and workshops video</a> (russian speaking)</li><li><a href="http://clubs.ya.ru/bem/">BEM club at Ya.Ru</a> (russian speaking)</li></ul></div>
