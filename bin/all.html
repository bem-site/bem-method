<html><head><title></title></head><body><div class="shmakowiki"><p>﻿=== Что такое БЭМ</p><p>Подход к web-разработке, который позволяет получить гибкий, легко изменяемый код.</p><p>BEM решает следующие задачи:</p><ul><li>разделение кода на логические части<ul><li>происходит разделение ответственности, части кода могут писать разные люди</li><li>использование без погружения в детали реализации - можно оперировать частями
    без погружения в то, как эти части сделаны</li><li>увеличивается вероятность повторного использования — чем больше частей у нашего решения,
    тем больше вероятность того, что какая-либо часть решения может быть повторно использована</li></ul></li><li>единый подход к реализации, во множестве технологий (мультилингвальность)<ul><li>в web-технологиях финальный продукт состоит из разных технологий, но при этом во всех
     технологиях единые термины и подходы к реализации</li><li>картинки и документация тоже технологии</li></ul></li><li>оптимизировать выполнение production runtime<ul><li>добавлять в него только действительно используемые части, не грузить лишний, не используемый код</li><li>генерировать для разных браузеров («виртуальных машин») разный код, оптимизированный для этого браузера</li><li>для улучшения скорости работы можно менять не код приложения, а улучшать «компилятор»,
    который генерирует код из БЭМ-сущностей
﻿=== Определения</li></ul></li></ul><h3>Блок</h3><p>Некая самостоятельная сущность, кирпичик проекта.<br/> Блок содержит информацию о самом себе и может знать о своих детях -— элементах блока.<br/> Они могут использоваться сами по себе или внутри других блоков.</p><p><b>Пример</b><br/></p><img src="/bem-method/images/search.ru.png"/><h3>Элемент</h3><p>Часть блока, которая отвечает за какую-то отдельную функцию.<br/> Элементы блока имеют смысл только в рамках своего родителя. Могут быть обязательными и не обязательными.</p><p><b>Пример</b><br/></p><img src="/bem-method/images/search-e.ru.png"/><h3>Модификатор</h3><p>Модификатор -— это свойство блока или элемента, которое меняет внешний вид или поведение.<br/> Модификатор имеет имя и значение. Одновременно может использоваться несколько разных модификаторов.</p><p><b>Пример</b><br/></p><img src="/bem-method/images/search-m.ru.png"/><h3>Уровень переопределения</h3><p>Уровень переопределения -— это набор реализаций блоков. Проект может иметь несколько уровней, на каждом из которых добавляется или изменяется реализация блоков. Конечная реализация блока собирается со всех уровней последовательно.</p><p><b>Пример</b><br/></p><img src="/bem-method/images/levels.ru.png"/><p>﻿=== Соглашения по именованию</p><h3>Имя блока</h3><p>Имя блока формируется как <tt>префикс-имя-блока</tt>.</p><p><b>Примеры</b></p><div>    b-menu
    b-popup
    i-popup</div><h3>Префикс блока</h3><p>Мы используем два вида префиксов, которые позволяют определить назначение блока.</p><p><b>b- (от block)</b><br/> Префикс блока с визуальным представлением на странице.</p><p><b>Пример</b><br/> Попап с тенью имеет конкретное визуальное представление. Может иметь или не иметь хвостик или закрывающий крестик. Может быть разных цветов. Может отображаться в разных направлениях.</p><img src="/bem-method/images/b-popup.png"/><p><b>i- (от include)</b><br/> Префикс абстрактного блока, который не существует сам по себе, но используется для построения других блоков.<br/> Или префикс блока не имеющего визуального представления и реализующего какую-то функциональность.</p><p><b>Пример</b><br/> Блок <tt>i-popup</tt> не имеет конкретного визуального представления. Хранит в себе функциональность, на основе которой строится блок <tt>b-popup</tt>. Без блока <tt>i-popup</tt> блок <tt>b-popup</tt> не существует.</p><img src="/bem-method/images/i-popup.png"/><h3>Имя элемента</h3><p>Полное имя элемента формируется так, чтобы из него можно было определить принадлежность данного элемента к конкретному блоку.<br/> Полное имя элемента создается по схеме: <tt>b-имя-блока_<span>_</span>имя-элмента</tt></p><p><b>Примеры</b></p><div>    b-menu__item
    b-popup__content</div><h3>Имя модификатора блока</h3><p>Полное имя модификатора блока формируется так, чтобы из него можно было определить принадлежность данного модификатора к конкретному блоку. Полное имя модификатора блока создается по схеме: <tt>b-имя-блока_имя-модификатора_значение-модификатора</tt>.</p><p><b>Примеры</b></p><div>    b-menu_layout_horiz
    b-menu_layout_vert
    b-popup_direction_up</div><h3>Имя модификатора элемента</h3><p>Полное имя модификатора элемента формируется так, чтобы из него можно было определить принадлежность данного модификатора к конкретному элементу конкретного блока. Полное имя модификатора элемента создается по схеме: <tt>b-имя-блока_<span>_</span>имя-элемента_имя-модификатора_значение-модификатора</tt>.</p><p><b>Примеры</b></p><div>    b-menu__item_state_current
    b-popupa__content_visibile_yes
    b-popupa__content_visibile_no</div><p>﻿=== Варианты модификации блока</p><ul><li>Модификатором</li><li>Контекстом</li><li>Уровнем переопределения</li></ul><h3>Модификатором</h3><p>Блоку/элементу добавляется модификатор и изменение блока/элемента описывается в коде этого модификатора.</p><p><b>Примеры</b></p><p>По умолчанию фон у попапа осутствует.</p><img src="/bem-method/images/b-popup-tr.png"/><p>Добавление модификатора theme блоку <tt>b-popup</tt> добавляет ему фон.<br/> <tt>theme=yellow</tt> добавляет фон желтого цвета:<br/></p><img src="/bem-method/images/b-popup-yellow.png"/><p><tt>theme=black</tt> добавляет фон черного цвета:<br/></p><img src="/bem-method/images/b-popup-bl.png"/><p>У блока может быть одновременно несколько модификаторов.</p><p><b>Примеры</b></p><p>Модификатор <tt>theme</tt> — отвечает за фон попапа. Модификатор <tt>direction</tt> — отвечает за направление отображения попапа.</p><p><tt>theme=yellow</tt> и <tt>direction=left</tt> — попап желтого цвета открывается влево:<br/></p><img src="/bem-method/images/b-popup-left.png"/><p><tt>theme=yellow</tt> и <tt>direction=right</tt> — попап желтого цвета открывается вправо:</p><img src="/bem-method/images/b-popup-right.png"/><p>Модификатор блока может изменять структуру блока (например, добавлять/удалять элементы) или его реализацию.</p><p><b>Пример</b> Модификатор <tt>has-close=yes</tt> — добавляет элемент закрывающий крестик. Добавляет отступы блоку, освобождая место крестика.</p><img src="/bem-method/images/b-popup-close.png"/><h3>Контекстом</h3><p>Блок при размещении в другом блоке может менять свой внешний вид или поведение.</p><p><b>Пример</b><br/> Цвет текста вложенного блока меняется с зелёного на красный, если он помещён в блок с синим фоном с красными буквами.</p><p><b>Примеры</b></p><p>Переключатель языков (<tt>b-lang-switcher</tt>)<br/></p><img src="/bem-method/images/lang-switcher.png"/><p>Переключатель языков (<tt>b-lang-switcher</tt>) в подвале страницы (<tt>b-foot</tt>), уменьшается размер шрифта.<br/></p><img src="/bem-method/images/lang-switcher-foot.png"/><h3>Уровнем переопределения</h3><p>Изменения создаются на следующем уровне переопределения и добавляют или изменяют функциональность блока.</p><p><b>Пример</b><br/> Блок может выглядеть на разных проектах по разному. При этом его общая часть лежит в одном файле (например, в репозитории фреймворка), а частная для проекта в другом (в репозитории проекта). Блок доопределяется дополнительными проектными файлами.</p><p>TODO: Сделать пример или ссылку на пример. ﻿=== Структура блока на файловой системе</p><p>Реализация блока состоит из набора технологий, к примеру:</p><ul><li>HTML-разметка обеспечивает нужную разметку (<tt>XML</tt> + <tt>XSL</tt> = <tt>HTML</tt> или <tt>bemjson</tt> + <tt>bemhtml</tt> = <tt>HTML</tt>)</li><li>CSS-правила внешний вид блока</li><li>JS-правила поведения блока</li></ul><p>Этот набор технологий может быть разным, в зависимости от блока, его назначения, и удобства использования.</p><p>В файловой системе реализации в разных технологиях записаны в соответствующие файлы. Имена файлов соответствуют соглашению об именовании.</p><h3>Каждый блок в директории, элементы и модификаторы в отдельных директорияx</h3><div>    blocks/
        b-menu/
            _layout/
                b-menu_layout_horiz.css
                b-menu_layout_horiz.bemhtml
                b-menu_layout_vertical.css
                b-menu_layout_vertical.bemhtml
            __elem/
                b-menu__elem.css
                b-menu__elem.bemhtml
            b-menu.css
            b-menu.js
            b-menu.bemhtml</div><h3>Каждый блок в директории, элементы и модификаторы в отдельных файлах без директорий</h3><div>    blocks/
        b-menu/
            b-menu_layout_horiz.css
            b-menu_layout_horiz.bemhtml
            b-menu_layout_vertical.css
            b-menu_layout_vertical.bemhtml
            b-menu__elem.css
            b-menu__elem.bemhtml
            b-menu.css
            b-menu.js
            b-menu.bemhtml</div><h3>Каждый блок в директории, элементы и модификаторы в файлах блока</h3><div>    blocks/
        b-menu/
            b-menu.css
            b-menu.js
            b-menu.bemhtml</div><h3>Директории не используются, элементы и модификаторы в отдельных файлах</h3><div>    blocks/
        b-menu_layout_horiz.css
        b-menu_layout_horiz.bemhtml
        b-menu_layout_vertical.css
        b-menu_layout_vertical.bemhtml
        b-menu__elem.css
        b-menu__elem.bemhtml
        b-menu.css
        b-menu.js
        b-menu.bemhtml</div><h3>Директории не используются, элементы и модификаторы в файлах блока</h3><div>    blocks/
        b-menu.css
        b-menu.js
        b-menu.bemhtml</div><p>﻿BEM-метод подразумевает реализацию блока в различных технологиях.</p><p>TODO: нарисовать картинку с уровнями переопределения и технологиями</p><p><tt># HTML</tt></p><p>Реализация возможна в нескольких вариантах.</p><p>http:<i>clubs.ya.ru/bem/replies.xml?item_no=712</i></p><p><tt></tt> Тэги HTML и классы</p><p>TODO</p><p><tt></tt> Кастомные тэги</p><p>TODO</p><p><tt># CSS</tt></p><p>Каждая БЭМ-сущность должна иметь класс, чтобы при необходимости изменить или дописать или переопредлить для них CSS-свойства.</p><p>Опираясь на то, что любой блок, возможно придется использовать повторно, т.е. блок не является уникальным, CSS-свойства для блоков и его елементов описываются только через классы.</p><p><b>Важно</b>: CSS-свойства не описываются через `id`, а именно вот так *НЕ ПИШЕМ*:</p><p>    #header {}</p><p>CSS-классы для BEM-сущностей соответствуют полным именам этих сущностей<br/> См. [соглашение об именовании](#naming)</p><p><b>Примеры CSS-классов</b></p><p>    .b-popup {}                 <i> CSS-класс блока .b-popup<u>content {}        </u></i> CSS-класс элемента блока .b-popupa_theme_yellow {}   <i> CSS-класс модификатора блока</i></p><p>По возможности отказываемся от [Селекторов типа](http:<i>h.yandex.net/?http%3A%2F%2Fwww.w3.org%2FTR%2F2001%2FCR-css3-selectors-20011113%2F%23type-selectors).</i> Селекторы типа — селекторы, которые применяются к `DOM`-узлам без `CSS`-класса (элементо-зависимые селекторы).</p><p><b>Например</b>, вот так *НЕ ПИШЕМ*:</p><p>    p { color: #ccc; }</p><p>    table.news td { border-bottom: 1px solid #ccc; }</p><p>    .list li { float: left; }</p><p>Отказ от использования Селекторов типа и `CSS`-каскада уменьшает `Reflow Time` — чистое время наложения стилей на сформированный `DOM`.<i> TODO: Приложить ссылку на исследования.</i></p><p><tt># JavaScript</tt></p><p>В `JS` мы также работаем в терминах &quot;Блок-Элемент-Модификатор&quot;. `DOM`-представление блоков рассматривается как более низкий уровень реализации.<br/> Допустимы блоки без `DOM`-представления. Обычно это блоки-хелперы.</p><p><b>Пример блоков без `DOM`-представления:</b></p><p>    i-request                <i> Конструктор запросов i-request_type_ajax      </i>Конструктор AJAX-запросов</p><p>TODO: Подготовить i-bem к релизу.</p><p><tt># Шаблоны</tt></p><p>TODO: Подготовить bemhtml В простейшем случае блок соответствует `DOM`-узлу, один к одному. Но важно понимать, что `DOM`-узел и блок это не всегда одно и тоже.</p><p><tt># Микс</tt></p><p>Под миксом подразумевается смешивание на одном DOM-узле разных блоков и элементов.</p><p>На одном DOM-узле может быть:</p><ul><li>несколько блоков</li></ul><p>        b-menu b-head-menu</p><ul><li>блок и элемент этого же блока</li></ul><p>        b-menu b-menu<u>layout</u></p><ul><li>блок и элемент другого блока</li></ul><p>        b-link b-menu<u>link</u></p><ul><li>элемент одного блока и элемент другого блока</li></ul><p>        b-menu<u>item b-head-menu</u>item</p><ul><li>блок с модификатором и другой блок</li></ul><p>        b-menu b-menu_layout_horiz b-head-menu</p><ul><li>блок с модификатором и другой блок с модификатором</li></ul><p>        b-menu b-menu_layout_horiz b-head-toolbar b-head-toolbar_theme_black</p><p><b>Пример</b></p><p>Переключатель панелей имеет элементы табы (`b-tabbed-pane<u>tabs`) и панели (`b-tabbed-pane</u>panels`). Эти два элемента находятся на одном `DOM`-узле одновременно. Это позволяет легко менять расположение элементов на странице с вертикального на горизонтальное.</p><p>Вертикальное расположение элементов</p><p>![Панели над табами](https:<i>github.com/bem/bem-method/raw/master/images/tab-panel-v.png)</i></p><p>    &lt;div class=&quot;b-tabbed-pane b-tabbed-pane<u>tabs&quot;&gt; ... &lt;/div&gt; &lt;div class=&quot;b-tabbed-pane b-tabbed-pane</u>panels&quot;&gt; ... &lt;/div&gt;</p><p>Горизонтальное расположение элементов</p><p>![Панели рядом с табами](https:<i>github.com/bem/bem-method/raw/master/images/tab-panel-h.png)</i></p><p>    &lt;table class=&quot;b-layout-table&quot;&gt; &lt;tr&gt; &lt;td class=&quot;b-layout-table<u>column b-layout-table</u>column_side_left&quot;&gt; &lt;div class=&quot;b-tabbed-pane b-tabbed-pane<u>tabs&quot;&gt; ... &lt;/div&gt; &lt;/td&gt; &lt;td class=&quot;b-layout-table</u>column b-layout-table<u>column_side_right&quot;&gt; &lt;div class=&quot;b-tabbed-pane b-tabbed-pane</u>panels&quot;&gt; ... &lt;/div&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt;Проект, реализованный на БЭМ состоит из одного или нескольких уровней переопределения и кода страниц.</p><p>Приведённые ниже примеры структуры не жёсткие и могут быть изменены в зависимости от потребностей проекта.</p><p><tt># Страница</tt></p><p>Совокупность файлов, которые определяют внешний вид и поведение конкретной страницы.</p><p><b>Пример</b></p><p>    pages/ index/ index.css index.js index.bemhtml index.bemdecl index.bemjson</p><p>Страница состоит из описания блоков, которые на ней используются (`.bemdecl`) и конкретного их расположения (`.bemjson`). Это исходный код страницы. Из него генерируются все необходимые для отображения файлы (`.css`, `.js`, etc)</p><p><tt></tt> Исходный код страницы</p><p><tt></tt># index.bemdecl</p><p>TODO: написать пример страницы с использованием b-page, b-menu и b-link</p><p><b>Пример index.bemdecl</b></p><p>    module.exports = [ { name : &apos;b-page&apos;, elems : [ { name : &apos;head&apos; }, { name : &apos;title&apos; } ] }, { name: &apos;b-link&apos;, mods: [ { name : &apos;isBEM&apos;, vals : [ { name : &apos;yes&apos;} ] } ] } ]</p><p><tt></tt># index.bemjson  TODO: написать пример страницы с использованием b-page, b-menu и b-link</p><p><b>Пример index.bemjson</b></p><p>    ({ block: &apos;b-page&apos;, content: { block: &apos;b-link&apos;, url: &apos;http:<i>yandex.ru&apos;, content: &apos;Самая посещаемая страница Рунета&apos; } })</i></p><p><tt></tt> Генерируемые файлы</p><p><tt></tt># index.css</p><p>TODO: написать пример index.css с использованием b-page, b-menu и b-link</p><p><b>Пример index.css</b></p><p>    @import url(lego/b-page/b-page.css); @import url(lego/b-menu/b-menu.css); @import url(lego/b-menu/_layout/b-menu_layout_horiz.css); @import url(lego/b-menu/_layout/b-menu_layout_vert.css); @import url(lego/b-menu/_layout/b-menu_layout_vert.css);</p><p><tt></tt># index.js</p><p>TODO: написать пример index.js с использованием b-page, b-menu и b-link</p><p>    include(lego/b-menu/b-menu.js); include(lego/i-counter/i-counter.js);</p><p><tt># Уровни переопределения проекта</tt></p><p>Проект состоит из [уровней переопределения](#levels). Количество уровней переопределения зависит от проекта, всегда есть минимум 1 уровень.</p><p>TODO: картинка с уровнями и технологиями</p><p>Реализация блока может быть на нескольких уровнях. Для каждой страницы можно настроить своё используемое множество уровней. Финальная реализация блока на странице собирается со всех уровней для этой страницы.</p><p><tt></tt> Расположение уровней на проектах</p><p><tt></tt># Только блоки проекта</p><p>    project/ blocks/ b-head/ b-head.css b-head.bemhtml b-foot/ b-foot.css b-foot.bemhtml b-sidebar/ b-sidebar.css b-sidebar.bemhtml</p><p><tt></tt># Блоки проекта и отдельных страниц проекта</p><p>    project/ blocks/ b-head/ b-head.css b-head.bemhtml b-foot/ b-foot.css b-foot.bemhtml b-page/ b-page.bemhtml b-sidebar/ b-sidebar.css b-sidebar.bemhtml pages/ index/ blocks/ b-head/ b-head.css             # переопределили вид шапки на заглавной странице about/ blocks/ b-about-text/              # добавили новый блок b-about-text.css b-about-text.bemhtml</p><p><tt></tt># Блоки фреймворка и проекта</p><p>    project/ framework/ b-menu/ b-menu.css b-menu.bemhtml b-page/ b-page.css b-page.bemhtml blocks/ b-head/ b-head.css b-head.bemhtml b-foot/ b-foot.css b-foot.bemhtml b-page/                           # переопределение шаблонов b-page из уровня framework&apos;а b-page.bemhtml b-sidebar/ b-sidebar.css b-sidebar.bemhtml</p><p><tt></tt># Блоки фреймворка, проекта и страниц</p><p>    project/ framework/ b-menu/ b-menu.css b-menu.bemhtml b-page/ b-page.css b-page.bemhtml blocks/ b-head/ b-head.css b-head.bemhtml b-foot/ b-foot.css b-foot.bemhtml b-page/                           # переопределение шаблонов b-page из уровня framework&apos;а b-page.bemhtml b-sidebar/ b-sidebar.css b-sidebar.bemhtml pages/ index/ blocks/ b-head/ b-head.css             # переопределили вид шапки на заглавной странице about/ blocks/ b-about-text/              # добавили новый блок b-about-text.css b-about-text.bemhtml</p><p><tt></tt># Блоки проекта, страниц и темы</p><p>    project/ blocks/ b-head/ b-head.css b-head.bemhtml b-foot/ b-foot.css b-foot.bemhtml b-page/                           # переопределение шаблонов b-page из уровня framework&apos;а b-page.bemhtml b-sidebar/ b-sidebar.css b-sidebar.bemhtml pages/ index/ blocks/ b-head/ b-head.css             # переопределили вид шапки на заглавной странице about/ blocks/ b-about-text/              # добавили новый блок b-about-text.css b-about-text.bemhtml themes/ black/                             # не раскладываем файлы по директориям, кладём их рядом b-head.css b-foot.css b-sidebar.css yellow/ b-head.css b-foot.css b-sidebar.css﻿Реализация блока состоит из набора технологий, к примеру:</p><ul><li>`HTML`-разметка обеспечивает нужную структуру блока (`XML` + `XSL` или `JSON` + `JS`)</li><li>`CSS`-правила внешний вид блока</li><li>`JS`-правила поведения блока</li></ul><p>Этот набор технологий может быть разным, в засимости от блока, его назначения, и удобства использования.<i> Структура блока первична, а реализация блока вторична.</i></p><p><b>Пример реализации блока b-domik</b></p><p>&lt;div style=&quot;float: right&quot;&gt; &lt;b&gt;Домик на странице&lt;/b&gt;<i> &lt;img src=&quot;https:</i>github.com/bem/bem-method/raw/master/images/domik-onpage.png&quot;/&gt;<i></i> &lt;b&gt;Домик в попапе&lt;/b&gt;<i> &lt;img src=&quot;https:</i>github.com/bem/bem-method/raw/master/images/domik-popup.png&quot;/&gt; &lt;/div&gt;</p><p>    b-domik/ b-domik.css                                     # общие файлы реализации для всех типов домика b-domik.ie.css b-domik.js b-domik.xsl _type/                                          # папка с модификаторами для блока b-domik_type_onpage.css                     # домик прибитый на странице b-domik_type_onpage.ie.css b-domik_type_onpage.js b-domik_type_onpage.xsl b-domik_type_popup.css                      # домик как всплывающее окно b-domik_type_popup.ie.css b-domik_type_popup.js b-domik_type_popup.xsl <u>lock/                                         # замочек — элемент блока b-domik</u>lock.css b-domik<u>lock.png b-domik</u>lock.xsl _visibility/                                # модификатор элемента lock, делает его видимым b-domik<u>lock_visibility_visible.css </u>shadow/                                       # тень — элемент блока b-domik<u>shadow.css b-domik</u>shadow.ie.css b-domik<u>shadow.png</u></p><p>&lt;div style=&quot;clear: both;&quot;&gt;&lt;/div&gt; <tt># bem-tools `bem-tools` в данный момент содержат одну утилиту командной строки bem, которая упрощает работу с различными BEM-сущностями.</tt></p><p><tt></tt> Установка на MacOSX</p><ul><li>Установить [Xcode](http:<i>h.yandex.net/?http%3A%2F%2Fru.wikipedia.org%2Fwiki%2FXcode)
 с установочного диска или с [сайта Apple](http:</i>h.yandex.net/?http%3A%2F%2Fdeveloper.apple.com%2Ftools%2Fxcode%2F)</li><li>Установить [homebrew](http:<i>h.yandex.net/?https%3A%2F%2Fgithub.com%2Fmxcl%2Fhomebrew)</i></li></ul><p>        ruby -e &quot;$(curl -fsSL https:<i>gist.github.com/raw/323731/install_homebrew.rb)&quot;</i></p><ul><li>Установить [nodejs](http:<i>h.yandex.net/?http%3A%2F%2Fnodejs.org%2F)</i></li></ul><p>        brew install node</p><ul><li>Установить [npm](http:<i>h.yandex.net/?http%3A%2F%2Fnpmjs.org%2F)</i></li></ul><p>        curl http:<i>npmjs.org/install.sh | sh</i></p><ul><li>Установить [bem-tools](http:<i>h.yandex.net/?https%3A%2F%2Fgithub.com%2Fbem%2Fbem-tools)</i></li></ul><p>        npm install bem</p><p><tt></tt> bem create</p><p>С помошью `bem create` можно создавать сущности:</p><ul><li>уровни переопределения</li><li>блоки</li><li>элементы</li><li>модификаторы</li></ul><p><tt></tt># Уровень переопределения</p><p>Уровень переопределения это директория, в которой хранятся реализации блоков и служебная директория .bem (опциональна).</p><p>В `.bem` хранятся настройки этого уровня переопределения:</p><ul><li>соглашения об именовании</li><li>технологии по умолчанию</li></ul><p><tt></tt><tt> Создание уровня переопределения blocks в текущей директории:</tt></p><p>    bem create level blocks</p></div>
</body></html>